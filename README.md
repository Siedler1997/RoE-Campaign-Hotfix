# Unofficial RoE Communitypatch
Dieser inoffizielle Patch behebt diverse Bugs der History Edition vom Spiel 'Die Siedler - Aufstieg eines Königreichs' und fügt neue Features hinzu.



## Installation
Mit folgenden Schritten lässt sich der Patch installieren:
1. Lege eine Sicherheitskopie von `extra1` unter dem Namen `extra1_orig` an.
Extra1 findest du unter The `Settlers - Rise of an Empire - History Edition\Data`. Du kannst die Kopie nennen, wie du willst.
2. Projekt über Code -> Download ZIP herunterladen
3. Kopiere den `Data` Ordner in der Zip nach `Settlers - Rise of an Empire - History Edition` und bstätige das Überschreiben.
4. Ändere die Starteinstellungen in Steam bzw. Uplay, sodass das Programm mit `-EXTRA1` als Parameter ausgeführt wird.
3. Zocken

## Deinstallation
Mit folgenden Schritten lässt sich der Patch deinstallieren:
1. Lösche `Settlers - Rise of an Empire - History Edition\Data\extra1`.
2. Benenne die Sicherheitskopie von `extra1_orig` in `extra1` um.
3. Entferne `-EXTRA1` aus den Startoptionen von Steam bzw. Uplay.
4. Vanilla zocken



## Features
Folgende Änderungen wurden vorgenommen:
- Ritter
	- Haben nun je 3 "Fackeln", um Gebäude angreifen zu können
	- "Alte" Ritter überarbeitet
		- Allandra
			- Passive Fähigkeiten: Bonusgold für Predigten erhöht (20% -> 40%)
			- Bonus: Lebenspunkte leicht erhöht (1.000 -> 1.100)
		- Elias
			- Aktive Fähigkeit: Gewährt zusätzlich den "Vielfältige Nahrung"-Bonus
			- Passive Fähigkeiten: Handelsbonus erhöht (20% -> 40%)
		- Hakim
			- Aktive Fähigkeit (Konversion)
				- Cooldown leicht erhöht (7:30 Min. -> 8:00 Min.)
				- Kann nicht benutzt werden, wenn Soldatenlimit schon erreicht
		- Marcus
			- Bonus: Lebenspunkte leicht erhöht (1.000 -> 1.100)
		- Thordal
			- Aktive Fähigkeit: Gewährt zusätzlich den "Vielfältige Unterhaltung"-Bonus
			- Boni: Angriffskraft erhöht (25 -> 50) und Rekrutierung von Wikingern in Kasernen
		- Kestral
			- Bonus: Rekrutierung von Banditen in Kasernen (Art hängt von Klimazone ab)
		- Saraya
			- Aktive Fähigkeit: Mindest-Warenmenge erhöht (5 -> 9)
			- Passive Fähigkeit: Handelsposten noch billiger (50% -> 25%)
	- "Neue" Ritter implementiert
		- Crimson Sabatt
			- Aktive Fähigkeit: Konversion (wie Hakim)
			- Passive Fähigkeit: Bessere Handelskonditionen (wie Elias)
			- Bonus: Rekrutierung von Signatureinheiten in Kasernen
		- Der Rote Prinz
			- Aktive Fähigkeit: Tribut (wie Saraya)
			- Passive Fähigkeit: Höhere Steuern (wie Kestral)
			- Bonus: Rekrutierung von Signatureinheiten in Kasernen
			- Für Mapper: 
				- Es gibt auskommentierte Codeschnippsel für eine "richtige" Seuchen-Fähigkeit
				- Wird zurzeit nicht verwendet, da im Mehrspieler nicht nutzbar
				- Wer sie nutzen will, kann sie womöglich reaktivieren
		- Khana
			- Aktive Fähigkeit: Versorgung von Soldaten mit Fackeln (wie Marcus)
			- Passive Fähigkeit: Mehr Gold von Predigten (wie Allandra)
			- Bonus: Rekrutierung von Signatureinheiten in Kasernen
		- Praphat
			- Aktive Fähigkeit: Versorgung von Einwohnern mit Kleidung und gewährt "Vielfältige Kleidung"-Bonus (analog Elias/Thordal)
			- Passive Fähigkeit: Billigerer Ausbau von Gebäuden (wie Hakim)
		- Kastellane 
			- Können theoretisch als Ritter genutzt werden
			- Haben keine besonderen Fähigkeiten
		- Varianz an Ladebildschirm-Bildern
- Militär
	- Einheiten können mittels Entlassen-Button ... entlassen werden
	- Bogenschützen allgemein
		- Fernkampf-Schaden deutlich reduziert (30 -> 20)
		- Maximale Fernkampf-Reichweite leicht erhöht (24sm -> 25sm)
		- Ausnahme: Wikinger-Axtwerfer
	- Banditen 
		- Können in Kasernen wieder aufgefüllt werden
		- Haben ein eigenes Audio-Feedback
		- Haben etwas andere Statuswerte ggü. konventionellen Einheiten
			- Weniger Lebenspunkte (-5)
			- Höhere Bewegungsgeschwindigkeit (480 < 500)
			- Höherer Schaden gegen Gebäude (5 -> 10)
			- Eine Fackel mehr (1 -> 2)
		- Fixes
			- Südeuropäische Banditen-Schwertkämpfer greifen nicht mehr automatisch Gebäude an
			- Asiatische Banditen haben keine Overhead-Namen mehr
	- Signatureinheiten vom Roten Prinzen und Khana 
		- Können in Kasernen wieder aufgefüllt werden
		- Haben ein anderes Audio-Feedback 
			- Zurzeit noch das von Banditen...
		- Haben etwas andere Statuswerte ggü. konventionellen Einheiten
			- RP
				- Weniger Lebenspunkte (-5)
				- Höhere Bewegungsgeschwindigkeit (480 < 490)
			- Khana
				- Weniger Lebenspunkte (-10)
				- Höhere Bewegungsgeschwindigkeit (480 < 500)
				- Höherer Schaden gegen anderen Einheiten (20 < 22)
		- RP-Einheiten haben eine eigene Button-Textur
		- Khana-Einheiten haben keine Overhead-Namen mehr
	- "Neue" Einheiten
		- Lanzenträger
			- Inspiriert von den Streitlanzenträgern in DEdK
			- Statuswerte (im Vergleich zu Schwertkämpfern)
				- Höhere Lebenspunkte (180 > 120)
				- Weniger Schaden (15 < 20)
				- Etwas höhere Reichweite (2sm > 1,5sm)
				- Langsamere Bewegungsgeschwindigkeit (420 < 480)
		- Hellebardiere
			- Basieren auf den Hellebardieren in DEdK
			- Haben noch etwas bessere Stats als Streitlanzenträger
			- Sind Einzelgänger
			- NICHT rekrutierbar, aber kontrollierbar
				- Für Mapper: Gut nutzbar als NPCs bzw. Dekoration
		- Raubtiere als kontrollierbare Militäreinheiten verfügbar
			- Konkret: Bären (3 Arten), Löwen (2 Arten), Wölfe (4 Arten), Tiger
		- Trebuchet
			- Funktioniert ähnlich wie ein Katapult
				- Höhere Maximalreichweite (32sm > 24sm)
				- Höhere Mindestreichweite (18sm > 10sm)
				- Höherer Schaden (100 > 50)
				- Geringere Feuerrate (7.5 Sek. > 5 Sek.)
				- Braucht länger zum Auf- und Abbau (8 Sek. > 5 Sek.)
			- Kann sich in aufgebauter Form nicht fortbewegen
			- Muss nicht von Soldaten bedient werden
			- Zurzeit noch nicht baubar, vllt. mit Titel "Erzherzog"?
	- "Alte" Trebuchets
		- Richtiges Selektionsmenü
		- Eigener Tooltip-String
		- Mit Munition belieferbar
		- Diverse Anpassungen auf Basis des "neuen" Trebuchets
	- Rammen können keine Mauern mehr angreifen
	- (Turm-)Katapulte und Trebuchets können Militäreinheiten aktiv angreifen
	- Overhead und SelectionMenu vom Gefängniskarren den anderen Karren angeglichen
	- Mauerkatapulte abgeschwächt
		- Kosten mehr Eisen (5 -> 10)
		- Kosten mehr Gold (200 -> 300)
		- Schaden reduziert (50 -> 40)
		- Mindestreichweite erhöht (10sm -> 12sm)
		- Sind auf maximal 12 Stück gleichzeitig pro Spieler limitiert
	- Diebe
		- Sind auf maximal 6 Stück gleichzeitig pro Spieler limitiert
- Gebäude
	- Kirche
		- Mehr Siedler pro Predigt möglich
		- Einwohnerlimit pro Ausbaustufe erhöht
		- Eigenes Icon auf der Minimap
	- Burg
		- Soldatenlimit pro Ausbaustufe erhöht
		- Eigenes Icon auf der Minimap
		- Spielerwappen wird nicht mehr auf dem Banner am Eingang abgebildet
			- Technisch leider zwecks Konsistenz zwischen alten und neuen Wappen notwendig
	- Lagerhaus
		- Lagerkapazität der 3. und 4. Ausbaustufe erhöht
		- Eigenes Icon auf der Minimap
	- Marktplatz: Generische Ritter-Statue bei Khana, Praphat und Kastellanen
	- "Neue" Gebäude
		- Wachturm
			- Kostet 11 Steine
			- Kann mit einem Turmkatapult ausgerüstet wwerden
		- Aussichtsturm
			- Kostet 12 Steine
			- Besitzt eine hohe Sichtweite
			- Sieht einfach schick aus :)
	- NPC-Gebäude
		- RP-/Khana-Kasernen
			- Funktionieren unter Spieler-Kontrolle wie normale Kasernen auch
			- Ermöglichen, unabhängig vom Ritter, Rekrutierung von RP- bzw. Khana-Einheiten
		- Alle NPC-Gebäude mit Menü
			- Sollten nun einen Namens-String haben
			- Zeigen die Ausbaustufe "1/1" an
		- Hauptspiel-Marktplätze haben ein Mouseover
	- Bienenstöcke haben weniger Lebenspunkte (10 -> 5)
	- Handelsposten-Baubutton hat einen etwas verständlicheren Tooltip
- Hauptmenü
	- AddOn nutzt weitgehend Hauptspiel-Hintergrund und Soundtrack
	- Hintergrund ist tageszeitabhängig
	- Kartenauswahl
		- Im AddOn wieder alle Ritter auswählbar, inklusive die Neuen
		- Ritter-Restriktionen erlauben jetzt die korrekte Sperrung einzelner Ritter
		- Filter
			- Im Einzelspieler nach Herkunft und Missionsziel
			- Im Mehrspieler nach Herkunft und maximaler Spieleranzahl
			- Wenn dadurch keine ausgewählt ist wird Mapvorschau geleert und Starten-Button deaktiviert
		- Im AddOn auch alle Hauptspiel-Karten auswählbar
- Diverses
	- Automatisches Schnellspeichern deaktiviert
		- Für Mapper: Quicksave wurde über neue Funktion umgeleitet: KeyBindings_SaveGame_Neu()
	- Teardown-Sound von Palisaden/Mauern etwas leiser
	- Marcus wird nicht mehr als generischer Ritter gesetzt
	- Ungenutztes Audio-Feedback von Rittern, Soldaten und Dieben wird nun verwendet
	- Eisbären nutzen ihre richtige Sterbeanimation
	- Maximale bzw. Standard-Kapazität von Stein- und Eisenminen etwas erhöht (250 -> 300)
	- Geologeneinsätze 
		- Kosten deutlich mehr Gold (250 -> 500)
		- Haben einen verständlicheren Tooltip sowie einen eigenen Disabled-Tooltip
		- Für Mapper: Können mit den neuen Technologien 'R_RefillStoneMine', 'R_RefillIronMine' und 'R_RefillCistern' verboten werden
	- Steuern
		- Maximale Anzahl an Steuereintreibern erhöht (6 -> 8)
	- Bei Minimap-Benachrichtigung wird der auslösende Spieler erst entfernt, um Verwirrung zu vermeiden
	- Neun "neue" Spielerfarben
	- Wappen
		- Textur ist im Beförderungs-Fenster nun richtig zentriert
		- Neue, von Stronghold 2 und Legends inspirierte Wappen
	- Alternative Spielerfarbe: Gelb
		- Ist in den Optionen (de-)aktivierbar
		- Wirkt sich auch auf das gewählte Wappen aus
		- Hat keinen Einfluss auf den Multiplayer
	- Profil-Menü
		- Buttons haben nun alle einen Hover-Effekt
		- Speichern der Profileinstellungen funktioniert nun zuverlässig
	- Kampfmusik nach Klimazonen getrennt (als verschiedene Playlists)
	- Baumenü: BeautificationMenu verschönert
	- Unterschiedliche Festival-Musik, je nachdem, ob der Anlass eine Heldenbeförderung oder ein normales Fest ist
	- Niederlagen-Kamerarotation deutlich verlangsamt
	- Sieg und Niederlage haben jeweils eine Art "Jingle"
	- Spielerfarben auf der Minimap sind nun (meistens) korrekt
    - NPC Charaktere können nicht mehr Spieler 0 angehören
    - Arbeiter von Kasernen holen nur eine Ware per Zyklus (Soll nicht vollständig gefüllte Kasernen verhindern)
- Kampagnen
	- Hauptspiel-Kampagne auch im AddOn spielbar
	- Bugs gefixt
		- Verfrühte Meldungen von KI-Mitspielern (M05: Drengir, M09: Husran)
		- Verstärkung für den Spieler spawnt jetzt (M15: Vestholm)
		- KI verliert am Anfang der Mission keine Territorien mehr (M09: Husran)
		- Unnütze Randterritorien in benachbarte eingegliedert (M14: Gueranna)
	- KI-Spielerfarben
		- Mehr Varianz bei Spielerfarben
		- Konsistentere Spielerfarben im AddOn
	- Thronsaal 
		- Hat einen eigenen Soundtrack
		- Tür wird von Hellebardieren bewacht
	- Diverses
		- M09: Husran: KI aggressiver und mit eigener Eisenmine
		- AM05: Idukun: durch etwas mehr Startkapital etwas einfacher



## (Mögliche) ToDos
- (OnSreen) Button-Texturen leicht versetzt
	- vmtl. Folge des Merges
- c00-m3: Falsche Nachricht am Anfang
- Lanzenträger/Hellebardiere
	- Icon
	- Audio-Feedback
	- Rekrutierung
		- Eigener Warenkreislauf?
			- Gebäude
			- Waren
		- ODER: Der Nahkämpferkaserne hinzufügen
			- Neuer Button für die Kaserne
			- "Schwertkämpfer***"-Strings zu "Nahkämpfer***" abändern
- Außenposten/Aussichtsturm/Wachturm
	- ME-Aussichtsturm: Schwarze Seite
	- Wachtürme: Mit Schützen bemannbar statt mit Katapulten ausrüstbar?
	- Eigene Button-Texturen für Aussichtsturm und Wachturm
- Hidun-Turnier: Neue Zelte und andere Siedler
	- Texturen für DEdK-Zelte gibt es schon
- Default custom maps
	- MP-Maps als Freibau-SP-Maps anpassen
		- Städte als KI-Städte neu erstellen
		- Diplomatie
			- Standard: Handelsverträge zum Spieler
			- Ggf. Option zur Kriegserklärung
		- ggf. Mapbeschreibungen anpassen
- Wikinger: Kontrollierter Ehefrauen-Raub ("Heist")
- RPG-Sicht zum rumlaufen
- Nutzbare (Tier-)Seuche, inkl. Musik
	- Ruhige, aber bedrohliche Playlist
	- Erst ab x% Betroffene, da sonst zu oft getriggert
- TTS
	- Ggf. Platzhalter
	- Notizen
		- Um +8db verstärken
		- ggf. Anfang und Ende kürzen
		- ggf. Geschwindigkeit -25%
		- Zu mp3 konvertieren
	- Stimmen
		- RedPrince-Units: Klaus Bauer
	- Ko-fi für GameTTS (als Schankedön)
- Nachrichten-Stau
- MP-Koop-Fixes
- Loadscreens
	- Format ändern, um das ganze Bild sehen zu können
		- Beispiel: siehe "chapter3_Test.png"
		- Ränder sollten noch etwas dekoriert werden
- Baubares Trebuchet
	- Eigenes Karren-Modell
	- Eigene Icon-Texturen
	- Es dreht sich nicht richtig
	- Begleitende Sodaten bewegen sich nach einem Move nicht mehr korrekt
	- Ggf. nur NPC-Einheit, dafür Fokus auf Kanone
- Sturm
	- soll mal funktionieren
	- Abwandlung: Schneesturm
	- Eigene Playlist
- Verbesserte/Glaubwürdigere KI (in der Kampagne)
	- Ungenutzte Territorien nutzbar machen (zumindest für die KI)
	- Allgemein: Konsequentere Nutzung von RP-/Khana-Einheiten sowie ggf. Söldner
	- Narfang: Sabatta aggressiv, wenn ein Außenposten erobert/zerstört wird
	- M15: Vestholm: Sturm
	- Idukun: Blizzard
	- Speziell in den "Last-Stand"-Missionen
	- Aktive KI-Ritter mit Fähigkeiten
	- Exploits beseitigen sowie andere Optimierungen
- Entlassen-Button im MP möglich machen (GUI.SendScriptCommand erforderlich)
- Söldner-Trupps: Korrekte Fackelanzeige
- Max. Zoom leicht erhöhen
	- Winkel muss nach 0.5 anders kalkuliert werden
- "Neue" Ritter 
	- Khana und Praphat
		- Sprüche als Strings weiter anpassen
		- Audio-Feedback (TTS)
	- Kastellane: 
		- Sprüche als Strings
		- Audio-Feedback (TTS)
	- Bei Basegame-Rittern AddOn-Comments ergänzen (TTS)
	- RP: Seuchen-Fähigkeit umsetzen, falls GUI.SendScriptCommand irgendwann wieder laufen sollte
- Regionaler Alkohol
	- ME: Bier = Getreide + Kräuter (Am aufwendigsten, aber durch idR. viel Farmland und reichlich Kräutervorkommen vertretbar)
	- NE: Met = Honig (Vanilla, da der Norden durch lange Winter eh schon gebeutelt ist, aber genug Farmland für Bienenstöcke da ist.)
	- SE: Wein = ? (Neue Weinreben? Wäre aufwendig, da neu, aber zumindest logisch)
	- NA: Raki = Kräuter (Mangels Farmland sehr simpel gehalten)
	- AS: Kräutermet = Honig + Kräuter (Wird in der AddOn-Kampagne im Rahmen eines Auftrags erwähnt/gefordert, also gibts eine Referenz dazu)
- Signatureinheiten für alle Ritter
	- Dabei auch jeder etwas andere Stats geben, damit es sich lohnt
	- Marcus		= Hellebardiere ("Garde")
	- Allandra	= Berittene Streitaxtkämpfer ("Paladine")
	- Elias		= Banditen (SE, 6er, "Händler-Miliz")
	- Kestral		= Banditen (ME, 6er)
	- Hakim		= Banditen (NA, 6er)
	- Thordal		= Banditen (NE, 6er)
	- Sabattata	= RP-Soldaten
	- Roter Prinz	= RP-Soldaten
	- Saraya		= Banditen (AS, 6er)
	- Praphat		= Große Kanonen
	- Khana		= Khana-Soldaten
- Audio-Feedback für Ochsen
- Rebalancing
	- Neue (sinnvollere) Aufstiegsbedingungen
		- ggf. mit Indikator, um nur für neue Maps und angepasste zu gelten
		- wegen zu hohem Aufwand (Kompatibiliät mit alten Maps) erstmal Low Priority
	- Maximale Anzahl Steuereintreiber erhöhen (ggf. nur, wenn neue Einheiten verfügbar)
	- Soldatenlimit anheben (ggf. nur, wenn neue Einheiten verfügbar)
	- Rebalancing insb. für MP
- Spielbare Dörfer
	- Dorfkasernen und Banditenzelte mit Rektutierungsoptionen
		- Neue Entities, da vorhandene zu sehr gescripted
	- Einnahmen?
	- Burg-Ersatz?
- Ungenutzte Gebäude
	- Juwelier
	- SpiceTrader
- Fremder Content
	- DEdK-Soundtrack
	- S4 Soundtrack
	- Stronghold Soundtrack
- Auf 4k-Auflösung kann nicht mehr per BorderScroll nach rechts gecrolled werden
- Biom-spezifisches Retexturing für Kerngebäude
	- Das oder neue Modelle
	- ggf. auch für andere Gebäude
- Kritische Cheats am Ende weitgehend deaktivieren
	- "Hintertür" für Mapper offen lassen
	- Andere zu regulären KeyBindings
- ReadMe auf Englisch
- Als bba gepackte Version für das Original
