<?xml version="1.0" encoding="UTF-8" standalone="no" ?><root>

    <Display classname="ED::CDisplaySettlerWithSlaveProps">
        <Class>ED::CDisplaySettlerWithSlave</Class>
        <Model>Units\Misc_Unit\U_Donkey_Master</Model>
        <Model2>Units\Misc_Unit\U_Trader_ME_Medicus_Cart</Model2>
        <Model3>Units\Misc_Unit\U_Trader_ME_Medicus_Driver</Model3>
        <SlaveAlwaysVisible>true</SlaveAlwaysVisible>
    </Display>

    <Logic classname="EGL::CSettlerProps">
        <Class>EGL::CSettler</Class>
        <AccessCategory>AccessCategoryAttackableSettler</AccessCategory>
        <PlayerSectorType>PlayerSectorTypeCivil</PlayerSectorType>&gt;
        <MaxHealth>60</MaxHealth>
        <NeedsPlayer>true</NeedsPlayer>
        <ForceNoPlayer>false</ForceNoPlayer>
        <EntityCategories>
            <!--EntityCategory>Worker</EntityCategory-->
            <EntityCategory>AttackableMerchant</EntityCategory>
        </EntityCategories>
        <AdjustWalkAnimSpeed>true</AdjustWalkAnimSpeed>
        <Exploration>4</Exploration>
        <IdleTaskList/>
        <OnScreenIcon>MinimapCart</OnScreenIcon>
        <IsSelectable>true</IsSelectable>
        <Familiar>
            <With>SheepPasture</With>
            <With>CattlePasture</With>
        </Familiar>
    </Logic>

    <Behaviors>
        <Behavior>
            <Logic classname="EGL::CAnimationBehaviorExProps">
                <Class>EGL::CBehaviorAnimationEx</Class>
                <AnimSet>SET_MARKETER</AnimSet>
            </Logic>
            <Display classname="ED::CAnimationBehaviorSlaveProps">
                <Class>ED::CAnimationBehaviorSlave</Class>
                <SlaveAnimation>
                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Stand</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Stand</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Stand</Slave2>
                    </Mapping>

                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Stand2</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Open_Stand</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Sell</Slave2>
                    </Mapping>

                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Stand3</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Open_Stand</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Sell2</Slave2>
                    </Mapping>

                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Walk</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Walk</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Walk</Slave2>
                    </Mapping>

                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Walk2</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Walk</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Walk2</Slave2>
                    </Mapping>

                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Walk3</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Walk</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Walk</Slave2>
                    </Mapping>

                    <Mapping>
                        <Master>Misc_Unit\U_Donkey_Walk4</Master>
                        <Slave>Misc_Unit\U_Trader_ME_Medicus_Cart_Walk</Slave>
                        <Slave2>Misc_Unit\U_Trader_ME_Marketer_Walk2</Slave2>
                    </Mapping>
                </SlaveAnimation>
            </Display>
        </Behavior>

        <Behavior>
            <Logic classname="EGL::CBehaviorDefaultMovementProps">
                <Class>EGL::CSettlerMovement</Class>
                <Speed>400</Speed>
                <SpeedFactorRoad>1.9</SpeedFactorRoad>
                <RotationSpeed>30</RotationSpeed>
                <MoveTaskList/>
                <MoveIdleAnim/>
                <StraightenPath>true</StraightenPath>
            </Logic>
            <Display classname="ED::CMovementBehaviorSlaveCartProps">
                <Class>ED::CMovementBehaviorSlaveCart</Class>
                <MovementToRotationSets>
                    <Set>
                        <MasterModel>Units\Misc_Unit\U_Donkey_Master</MasterModel>
                        <AngleLock>60</AngleLock>
                        <LowRotationAngle>10</LowRotationAngle>
                        <MovementToRotationFactor>0.3</MovementToRotationFactor>
                        <MovementToLowRotationFactor>0.2</MovementToLowRotationFactor>
                    </Set>
                </MovementToRotationSets>
            </Display>
        </Behavior>

        <!--<Behavior>
            <Logic classname="EGL::CGoodMerchantBehaviorProps">
                <Class>EGL::CGoodMerchantBehavior</Class>
                <TaskListDeliver>TL_GOOD_MERCHANT_DELIVER</TaskListDeliver>
                <TaskListDeliverNoMarketplace>TL_GOOD_MERCHANT_VANISH_IN_STOREHOUSE</TaskListDeliverNoMarketplace>
                <TaskListLeaveMarket>TL_TRAVELER_LEAVE_MARKETPLACE</TaskListLeaveMarket>
                <MarketShopIsOpenedModel>Units\Misc_Unit\U_Trader_ME_Medicus_Cart_Open</MarketShopIsOpenedModel>
                <PerformanceDurationInSeconds>1500</PerformanceDurationInSeconds>
                <MarketShopIsClosedModel>Units\Misc_Unit\U_Trader_ME_Medicus_Cart</MarketShopIsClosedModel>
                <TaskListDefended>TL_MERCHANT_DEFENDED</TaskListDefended>
                <TaskListWaitForFreeSlot>TL_MERCHANT_WAIT_FOR_FREE_SLOT</TaskListWaitForFreeSlot>
            </Logic>
        </Behavior>-->

        <!-- We abuse the fight behavior to drive the movement.
             This allows the script to move the unit, while rejecting
             move commands given by the user -->
        <Behavior>
            <Logic classname="EGL::CFightBehaviorProps">
                <Class>EGL::CFightBehavior</Class>
                <DefendTL>TL_MILITARY_DEFEND</DefendTL>
                <MoveTaskList>TL_KNIGHT_WALK</MoveTaskList>
                <DefendRange>0</DefendRange>
                <AttackMoveRange>0</AttackMoveRange>
            </Logic>
        </Behavior>

        <Behavior>
            <Logic classname="EGL::CGuardableBehaviorProps">
                <Class>EGL::CGuardableBehavior</Class>
                <GuardFormationID>GuardingMechant</GuardFormationID>
                <GuardApproachPos><X>-400</X><Y>0</Y></GuardApproachPos>
            </Logic>
        </Behavior>

        <Behavior>
            <Logic classname="EGL::CCapturableBehaviorProps">
                <Class>EGL::CCapturableBehavior</Class>
            </Logic>
        </Behavior>

        <Behavior>
            <Logic classname="EGL::CBehaviorProps">
                <Class>EGL::CTaskHistory</Class>
            </Logic>
        </Behavior>

        <Behavior>
            <Logic classname="EGL::CBehaviorPropsDying">
                <Class>EGL::CBehaviorDying</Class>
                <DyingTaskList>TL_DIE</DyingTaskList>
            </Logic>
        </Behavior>

        <Behavior>
            <Logic classname="EGL::CBehaviorProps">
                <Class>EGL::CParticleEffectAttachmentBehavior</Class>
            </Logic>
            <Display classname="ED::CBehaviorProps">
                <Class>ED::CParticleEffectAttachmentBehavior</Class>
            </Display>
        </Behavior>
    </Behaviors>
    <MapEditor>
        <TreePosition>Units\Mission</TreePosition>
        <ShowInTree>true</ShowInTree>
        <Clime>Generic</Clime>
        <Scalable>false</Scalable>
    </MapEditor>
</root>